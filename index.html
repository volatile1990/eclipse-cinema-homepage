<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eclipse Homecinema | Heimkino</title>
  <meta name="description" content="Eclipse Cinema: privates Heimkino mit großem Bild, präzisem Tiefgang und akustisch inszenierter Raumwirkung.">
  <meta name="robots" content="index,follow,max-image-preview:large">
  <meta name="theme-color" content="#090909">
  <meta property="og:locale" content="de_DE">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Eclipse Cinema | Heimkino">
  <meta property="og:description" content="Privates Heimkino mit starker Bildwirkung, kontrolliertem Bass und einer Bühne, die den Raum öffnet.">
  <meta property="og:image" content="assets/images/IMG_4022.avif">
  <meta property="og:image:alt" content="Frontansicht des Eclipse Cinema Heimkinos">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Eclipse Cinema | Heimkino">
  <meta name="twitter:description" content="Privates Heimkino mit starker Bildwirkung, kontrolliertem Bass und einer Bühne, die den Raum öffnet.">
  <meta name="twitter:image" content="assets/images/IMG_4022.avif">
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <link rel="shortcut icon" href="assets/favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="image" href="assets/images/IMG_4032.avif" fetchpriority="high">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Syne:wght@600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Eclipse Homecinema",
      "description": "Privates Heimkino mit immersiver Bild- und Klanginszenierung, kontrolliertem Tiefton und geplanter Raumakustik.",
      "inLanguage": "de"
    }
  </script>
</head>
<body>
  <a class="skip-link" href="#inhalt">Zum Inhalt springen</a>
  <div class="grain" aria-hidden="true"></div>

  <header class="hero" id="top">
    <div class="hero-media" aria-hidden="true">
      <img src="assets/images/IMG_4032.avif" alt="" width="8064" height="4536" loading="eager" fetchpriority="high" decoding="async">
    </div>

    <nav class="top-nav container" aria-label="Hauptnavigation">
      <div class="brand">Eclipse Homecinema</div>
      <div class="nav-links">
        <a href="#galerie">Galerie</a>
        <a href="#technik">System</a>
        <a href="#komponenten">Komponenten</a>
        <a href="#lautsprecher">Lautsprecher</a>
        <a href="#akustik">Akustik</a>
      </div>
    </nav>

    <section class="hero-content container">
      <p class="eyebrow">Privates Heimkino</p>
      <h1>Wenn Film nicht nur läuft,<br>sondern den Raum übernimmt</h1>
      <p class="lead">
        Eclipse Cinema ist ein dediziertes Heimkino: große Bühne vorne, ruhige Ortung im gesamten Sitzbereich
        und ein Bassfundament, das spürbar bleibt, ohne aufzudicken. Technik ist hier Mittel zum Zweck,
        damit Geschichten körperlich wirken.
      </p>
      <a class="cta" href="#galerie">Raum erleben</a>

      <div class="quick-facts">
        <article>
          <p class="label">Bildwirkung</p>
          <p class="value">332 cm auf Gerriets OPERA WHITE 2.2 MICRO</p>
        </article>
        <article>
          <p class="label">Tiefgang</p>
          <p class="value">16 Chassis im Double Bass Array</p>
        </article>
        <article>
          <p class="label">Bühne</p>
          <p class="value">24 Kanäle präzise auf den Raum abgestimmt</p>
        </article>
        <article>
          <p class="label">Feinschliff</p>
          <p class="value">Dirac Live ART für stabile Wiedergabe auf mehreren Plätzen</p>
        </article>
      </div>
    </section>
  </header>

  <main id="inhalt" tabindex="-1">
    <section class="section container" id="galerie">
      <div class="section-head">
        <p class="eyebrow">Raumeindruck</p>
        <h2>Galerie</h2>
      </div>
      <p class="section-lead">Klicke oder tippe auf ein Bild und wechsle direkt in die Vollansicht des Raums.</p>
      <div class="gallery">
        <figure>
          <button class="gallery-trigger" type="button" aria-label="Heimkino Ansicht 1 groß ansehen">
            <img src="assets/images/IMG_4022.avif" alt="Heimkino Ansicht 1" width="8064" height="4536" loading="lazy" decoding="async">
          </button>
        </figure>
        <figure>
          <button class="gallery-trigger" type="button" aria-label="Heimkino Ansicht 2 groß ansehen">
            <img src="assets/images/IMG_4023.avif" alt="Heimkino Ansicht 2" width="8064" height="4536" loading="lazy" decoding="async">
          </button>
        </figure>
        <figure>
          <button class="gallery-trigger" type="button" aria-label="Heimkino Ansicht 3 groß ansehen">
            <img src="assets/images/IMG_4024.avif" alt="Heimkino Ansicht 3" width="8064" height="4536" loading="lazy" decoding="async">
          </button>
        </figure>
        <figure>
          <button class="gallery-trigger" type="button" aria-label="Heimkino Ansicht 4 groß ansehen">
            <img src="assets/images/IMG_4025.avif" alt="Heimkino Ansicht 4" width="8064" height="4536" loading="lazy" decoding="async">
          </button>
        </figure>
        <figure>
          <button class="gallery-trigger" type="button" aria-label="Heimkino Ansicht 5 groß ansehen">
            <img src="assets/images/IMG_4028.avif" alt="Heimkino Ansicht 5" width="8064" height="4536" loading="lazy" decoding="async" fetchpriority="low">
          </button>
        </figure>
        <figure>
          <button class="gallery-trigger" type="button" aria-label="Heimkino Ansicht 6 groß ansehen">
            <img src="assets/images/IMG_4029.avif" alt="Heimkino Ansicht 6" width="8064" height="4536" loading="lazy" decoding="async" fetchpriority="low">
          </button>
        </figure>
        <figure>
          <button class="gallery-trigger" type="button" aria-label="Heimkino Ansicht 7 groß ansehen">
            <img src="assets/images/IMG_4032.avif" alt="Heimkino Ansicht 7" width="8064" height="4536" loading="lazy" decoding="async" fetchpriority="low">
          </button>
        </figure>
        <figure>
          <button class="gallery-trigger" type="button" aria-label="Heimkino Ansicht 8 groß ansehen">
            <img src="assets/images/IMG_4033.avif" alt="Heimkino Ansicht 8" width="8064" height="4536" loading="lazy" decoding="async" fetchpriority="low">
          </button>
        </figure>
      </div>
    </section>

    <section class="section container system-section" id="technik">
      <div class="section-head">
        <p class="eyebrow">Systeminszenierung</p>
        <h2>Komponenten, die gemeinsam Kino formen</h2>
      </div>
      <p class="section-lead">
        Inszenierung und Technik sind hier ein einziger Ablauf: Quelle, Verarbeitung, Antrieb und Wiedergabe greifen
        ineinander, damit Bild und Ton wie aus einem Guss wirken.
      </p>

      <div class="signal-chain">
        <article class="flow-step">
          <p class="step-id">01</p>
          <h3>Quelle</h3>
          <p>Streaming und lokale Mediathek liefern den Content ohne Umwege in das System.</p>
        </article>
        <article class="flow-step">
          <p class="step-id">02</p>
          <h3>Regie</h3>
          <p>Die Vorstufe verteilt Signale präzise auf alle Ebenen und hält Timing wie Ortung stabil.</p>
        </article>
        <article class="flow-step">
          <p class="step-id">03</p>
          <h3>Antrieb</h3>
          <p>Jeder Lautsprecher läuft auf seinem eigenen Endstufenkanal, was Ortung und Pegelfestigkeit klar reproduzierbar hält.</p>
        </article>
        <article class="flow-step">
          <p class="step-id">04</p>
          <h3>Bildbühne</h3>
          <p>JVC-NZ7 und die mikroperforierte Gerriets-Leinwand bilden zusammen ein ruhiges, kontraststarkes Frontbild.</p>
        </article>
      </div>

      <div class="visual-focus">
        <p class="visual-focus-eyebrow">Visuelle Bühne</p>
        <p class="visual-focus-copy">
          Die Bildkette ist bewusst als eigener Fokus aufgebaut, damit Helligkeit, Kontrast und akustische Integration
          der Front gemeinsam funktionieren.
        </p>
        <div class="component-grid visual-grid">
          <article class="component-card visual-card">
            <img src="assets/images/reference/jvc-nz7.png" alt="JVC DLA-NZ7 Projektor" width="1280" height="1024" loading="lazy" decoding="async">
            <div class="component-body">
              <p class="component-tag">Projektor</p>
              <h3>JVC DLA-NZ7</h3>
              <p class="component-role">Native-4K-Laserprojektion für hohe Bildruhe, tiefe Schwarzdarstellung und stabile HDR-Wiedergabe.</p>
              <p class="component-copy">
                Der NZ7 spielt die 332-cm-Bildbreite souverän aus und bleibt auch in dunklen Szenen differenziert.
                So wirkt das Bild groß, ohne unruhig zu werden.
              </p>
            </div>
          </article>

          <article class="component-card visual-card">
            <img src="assets/images/reference/gerriets-opera-white-2-2-micro.jpg" alt="Gerriets OPERA WEISS MICRO 2.2 Leinwandmaterial" width="1424" height="1424" loading="lazy" decoding="async">
            <div class="component-body">
              <p class="component-tag">Leinwand</p>
              <h3>Gerriets OPERA WHITE 2.2 MICRO</h3>
              <p class="component-role">Mikroperforierte, akustisch transparente Frontprojektionsfläche für Lautsprecherpositionen hinter dem Bild.</p>
              <p class="component-copy">
                Das Material arbeitet mit rund 300.000 Perforationen pro m2
                (Lochdurchmesser 0,50 mm, Offenfläche ca. 6 %). Die 0,30-mm-PVC-Folie ist 220 cm breit
                und wird hier für die 332-cm-Leinwandbreite eingesetzt; der Leuchtdichtefaktor ist mit beta 0,9 angegeben.
              </p>
            </div>
          </article>
        </div>
      </div>

      <div class="system-bridge" id="komponenten">
        <p class="system-bridge-eyebrow">Komponenten mit klarer Aufgabe</p>
        <p class="system-bridge-copy">
          Die Hardware wird nicht als Einzelteile gedacht, sondern als Ensemble.
          Jede Komponente hat eine definierte Rolle im Ablauf - vom ersten Input bis zur finalen Wirkung im Raum.
        </p>
      </div>

      <div class="component-grid tech-grid">
        <article class="component-card">
          <img src="assets/images/reference/stormaudio-isp-elite-mk2.webp" alt="StormAudio ISP Elite MK2" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Signalprozessor</p>
            <h3>StormAudio ISP Elite MK2</h3>
            <p class="component-role">Dekodierung, Kanalverteilung und raumbezogene Korrektur als zentrale Schaltstelle.</p>
            <p class="component-copy">
              Die StormAudio bildet das Zentrum des Setups und verteilt bis zu 24 Kanäle mit hoher Präzision.
              Sie übernimmt Decoding, Upmixing und die Dirac-gestützte Feinabstimmung des Raums.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/apollon-1et400a.png" alt="Apollon Purifi 1ET400A Multichannel Amplifier" width="1080" height="617" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Haupt-Endstufe</p>
            <h3>Apollon 1ET400A (8ch)</h3>
            <p class="component-role">Belegt mit L, R, Center im Bi-Amping sowie Left/Right Wide und Left/Right Surround.</p>
            <p class="component-copy">
              Damit übernimmt die Apollon die komplette Frontachse plus seitliche Breite und zentrale Surround-Ebene.
              Stimmen und Effektschwenks bleiben auch bei Pegel stabil verankert.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/iotavx-avxp-7-230.png" alt="IOTAVX AVXP 7-230" width="1280" height="640" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Haupt-Endstufe</p>
            <h3>IOTAVX AVXP 7-230 (7ch)</h3>
            <p class="component-role">Belegt mit Left/Right Back sowie Center/Left/Right Front Height und Left/Right Surround Height.</p>
            <p class="component-copy">
              Diese Endstufe trägt den Großteil der Höhen- und Back-Kanäle und schließt die 3D-Kuppel nach hinten sauber.
              Räumliche Bewegungen bleiben dadurch geschlossen und präzise.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/iota-avxp1-transparent.png" alt="IOTAVX AVXP1" width="1280" height="640" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Haupt-Endstufe</p>
            <h3>IOTA AVXP1 (7ch)</h3>
            <p class="component-role">Aktuell belegt mit Voice of God sowie Height Surround Back Left und Height Surround Back Right.</p>
            <p class="component-copy">
              Sie ergänzt die oberen Rückkanäle im Layout punktgenau und lässt der Höhenebene einen klaren Abschluss nach hinten.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/apple-tv-4k.png" alt="Apple TV 4K" width="281" height="404" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Zuspieler</p>
            <h3>Apple TV 4K</h3>
            <p class="component-role">Primäre Streaming-Quelle mit direkter Übergabe an die Vorstufe.</p>
            <p class="component-copy">
              Der Apple TV 4K ist die Streaming-Quelle für den Alltag und bringt moderne Video- und Audioformate
              direkt in den Signalweg des Kinos.
            </p>
          </div>
        </article>

        <article class="component-card">
          <div class="component-visual">
            <span>Zappiti Player</span>
          </div>
          <div class="component-body">
            <p class="component-tag">Zuspieler</p>
            <h3>Zappiti Player</h3>
            <p class="component-role">Lokale Filmarchive nahtlos als zweite Quellplattform integriert.</p>
            <p class="component-copy">
              Als zweite Quellplattform übernimmt Zappiti die lokale Mediathek
              und ergänzt das Streaming um direkten Zugriff auf Filmarchive.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/tsa-4-700.png" alt="the t.amp TSA 4-700" width="420" height="228" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">DBA-Endstufe</p>
            <h3>the t.amp TSA 4-700</h3>
            <p class="component-role">Vier DBA-Endstufen mit insgesamt 16 separaten Tieftonkanälen.</p>
            <p class="component-copy">
              Im Setup arbeiten vier TSA 4-700 für das Double Bass Array.
              Dadurch läuft jeder der 16 DBA-Subwoofer auf einem eigenen Endstufenkanal.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/oehlbach-powerstation-909.png" alt="Oehlbach Powerstation 909" width="1500" height="1500" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Stromversorgung</p>
            <h3>Oehlbach Powerstation 909</h3>
            <p class="component-role">Geordnete Stromverteilung als stabile Basis für das gesamte Rack.</p>
            <p class="component-copy">
              Die Powerstation strukturiert die Stromversorgung im Rack und hält die Anlage alltagstauglich organisiert.
              Sie ist der ruhige Unterbau hinter der sichtbaren Performance.
            </p>
          </div>
        </article>
      </div>
    </section>

    <section class="section container" id="lautsprecher">
      <div class="section-head">
        <p class="eyebrow">Lautsprecher</p>
        <h2>Lautsprecher mit klaren Rollen</h2>
      </div>
      <p class="section-lead">
        Jedes Modell übernimmt eine definierte Aufgabe im Raum - vom stabilen Dialoganker bis zur dichten 3D-Hülle.
      </p>

      <div class="component-grid speaker-grid">
        <article class="component-card">
          <img src="assets/images/reference/nubert-nuvero-nova-12.png" alt="Nubert nuVero nova 12" width="434" height="1057" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Center</p>
            <h3>Nubert nuVero nova 12</h3>
            <p class="component-copy">
              Der Center ist der Anker der Frontbühne und hält Stimmen exakt im Bild.
              Er sorgt dafür, dass Dialoge auch in dichten Szenen verständlich bleiben.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/nubert-nuvero-110.png" alt="Nubert nuVero 110" width="469" height="1280" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Front Left/Right</p>
            <h3>Nubert nuVero 110</h3>
            <p class="component-copy">
              Links und rechts bauen die nuVero 110 Größe, Druck und Räumlichkeit auf.
              Zusammen mit dem Center entsteht eine belastbare, breite Frontabbildung.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/nuvero-50-transparent.png" alt="Nubert nuVero 50" width="405" height="881" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Front Wide</p>
            <h3>Nubert nuVero 50</h3>
            <p class="component-copy">
              Die Wide-Ebene schließt die Lücke zwischen Front und Surround.
              Seitliche Bewegungen wirken dadurch flüssiger und glaubwürdiger.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/nuvero-70-transparent.png" alt="Nubert nuVero 70" width="500" height="500" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Surround</p>
            <h3>Nubert nuVero 70</h3>
            <p class="component-copy">
              Die seitlichen Surrounds tragen Atmosphäre und Bewegung in den Raum.
              Sie sind so eingebunden, dass Effekte präsent bleiben, aber nie aufdringlich wirken.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/nuline-ws-14-transparent.png" alt="Nubert nuLine WS-14" width="536" height="402" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Rear + Height</p>
            <h3>Nubert nuLine WS-14</h3>
            <p class="component-copy">
              Die WS-14 bilden Rückraum und Höhenebene mit insgesamt zehn Positionen ab.
              Damit entsteht ein geschlossenes 3D-Feld über und hinter dem Hörplatz.
            </p>
          </div>
        </article>

        <article class="component-card">
          <img src="assets/images/reference/scan-speak-30w4558t00-transparent.png" alt="Scan Speak 30W/4558T00" width="1200" height="800" loading="lazy" decoding="async">
          <div class="component-body">
            <p class="component-tag">Subwoofer-Chassis</p>
            <h3>Scan Speak 30W/4558T00</h3>
            <p class="component-copy">
              16 Chassis arbeiten als Double Bass Array und verteilen den Tiefbass gleichmäßig im Raum.
              Das Ergebnis ist Druck mit Struktur statt bloßem Pegel.
            </p>
          </div>
        </article>
      </div>

      <p class="source-note">
        Quellen Lautsprecherdaten: Nubert und Scan Speak (Stand: Februar 2026).
      </p>
    </section>

    <section class="section container" id="akustik">
      <div class="section-head">
        <p class="eyebrow">Raumakustik</p>
        <h2>Raumakustik mit Absicht</h2>
      </div>
      <p class="section-lead">
        Vorne wird Energie gezielt beruhigt, hinten wird sie kontrolliert aufgefächert.
        So bleibt der Raum präzise, ohne steril zu wirken.
      </p>

      <div class="cards two">
        <article class="card">
          <h3>Front und frühe Reflexionen</h3>
          <p class="card-copy">
            Der Frontbereich ist mit tiefen Konstruktionen und gezielter Absorption aufgebaut.
            In Kombination mit dem vorderen DBA entsteht ein direkter, klarer Startpunkt für die Bühne.
          </p>
        </article>

        <article class="card">
          <h3>Hörzone und Rückraum</h3>
          <p class="card-copy">
            Hinter der Hörzone übernehmen Slat- und 2D-Diffusoren die räumliche Öffnung.
            Unterschiedliche Oberflächen und konsequente Lichtkontrolle unterstützen den Kinoeindruck zusätzlich.
          </p>
        </article>
      </div>

      <article class="calibration">
        <h3>Kalibrierung</h3>
        <p>
          Eingemessen wird mit <strong>Dirac Live Active Room Treatment (ART)</strong> auf der StormAudio-Plattform.
          Das Ziel bleibt durchgehend gleich: ein belastbares, stimmiges Klangbild auf mehreren Sitzplätzen.
        </p>
      </article>
    </section>
  </main>

  <div class="lightbox" id="gallery-lightbox" role="dialog" aria-modal="true" aria-label="Galerie Vollansicht" aria-describedby="lightbox-caption" hidden aria-hidden="true" tabindex="-1">
    <button class="lightbox-close" type="button" aria-label="Galerie schließen">×</button>
    <button class="lightbox-nav lightbox-prev" type="button" aria-label="Vorheriges Bild">‹</button>
    <img class="lightbox-image" src="" alt="">
    <button class="lightbox-nav lightbox-next" type="button" aria-label="Nächstes Bild">›</button>
    <p class="lightbox-caption" id="lightbox-caption" aria-live="polite"></p>
  </div>

  <footer class="footer">
    <div class="container footer-content">
      <p class="footer-brand">Eclipse Cinema</p>
      <nav class="footer-links" aria-label="Footer Navigation">
        <a href="#top">Start</a>
        <a href="#technik">System</a>
        <a href="#komponenten">Komponenten</a>
        <a href="#lautsprecher">Lautsprecher</a>
        <a href="#akustik">Akustik</a>
      </nav>
      <p class="footer-note">Kontakt: <a href="mailto:markuscmueller7@googlemail.com">markuscmueller7@googlemail.com</a></p>
    </div>
  </footer>

  <script>
    (() => {
      const externalLinks = Array.from(document.querySelectorAll('a[target="_blank"]'));
      externalLinks.forEach((link) => {
        if (!link.hasAttribute("aria-label")) {
          const label = link.textContent?.trim() || "Externer Link";
          link.setAttribute("aria-label", `${label} (öffnet in neuem Tab)`);
        }
        if (!link.hasAttribute("title")) {
          link.setAttribute("title", "Öffnet in neuem Tab");
        }
      });

      const gallery = document.querySelector("#galerie .gallery");
      if (!gallery) return;

      const triggers = Array.from(gallery.querySelectorAll(".gallery-trigger"));
      const images = triggers
        .map((trigger) => trigger.querySelector("img"))
        .filter(Boolean);
      if (images.length === 0) return;

      const lightbox = document.getElementById("gallery-lightbox");
      const lightboxImage = lightbox?.querySelector(".lightbox-image");
      const lightboxCaption = lightbox?.querySelector(".lightbox-caption");
      const closeButton = lightbox?.querySelector(".lightbox-close");
      const prevButton = lightbox?.querySelector(".lightbox-prev");
      const nextButton = lightbox?.querySelector(".lightbox-next");

      if (!lightbox || !lightboxImage || !lightboxCaption || !closeButton || !prevButton || !nextButton) return;

      const focusableSelector = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
      const pageRoots = [
        document.querySelector("header.hero"),
        document.querySelector("main"),
        document.querySelector("footer.footer")
      ].filter(Boolean);

      let currentIndex = 0;
      let lastFocusedElement = null;

      const setBackgroundState = (isOpen) => {
        pageRoots.forEach((root) => {
          if ("inert" in root) {
            root.inert = isOpen;
          }
          if (isOpen) {
            root.setAttribute("aria-hidden", "true");
          } else {
            root.removeAttribute("aria-hidden");
          }
        });
      };

      const getFocusableElements = () => {
        return Array.from(lightbox.querySelectorAll(focusableSelector)).filter((element) => {
          if (element.hasAttribute("disabled")) return false;
          if (element.getAttribute("aria-hidden") === "true") return false;
          return true;
        });
      };

      const setSlide = (index) => {
        currentIndex = (index + images.length) % images.length;
        const sourceImage = images[currentIndex];
        lightboxImage.src = sourceImage.currentSrc || sourceImage.src;
        lightboxImage.alt = sourceImage.alt || "Galeriebild";
        lightboxCaption.textContent = sourceImage.alt || "";
      };

      const openLightbox = (index, triggerElement) => {
        lastFocusedElement = triggerElement || document.activeElement;
        setSlide(index);
        lightbox.hidden = false;
        lightbox.setAttribute("aria-hidden", "false");
        setBackgroundState(true);
        document.body.classList.add("lightbox-open");
        closeButton.focus();
      };

      const closeLightbox = () => {
        lightbox.hidden = true;
        lightbox.setAttribute("aria-hidden", "true");
        lightboxImage.removeAttribute("src");
        lightboxCaption.textContent = "";
        setBackgroundState(false);
        document.body.classList.remove("lightbox-open");
        if (lastFocusedElement && typeof lastFocusedElement.focus === "function") {
          lastFocusedElement.focus();
        }
      };

      triggers.forEach((trigger, index) => {
        trigger.addEventListener("click", () => openLightbox(index, trigger));
      });

      closeButton.addEventListener("click", closeLightbox);
      nextButton.addEventListener("click", () => setSlide(currentIndex + 1));
      prevButton.addEventListener("click", () => setSlide(currentIndex - 1));

      lightbox.addEventListener("click", (event) => {
        if (event.target === lightbox) {
          closeLightbox();
        }
      });

      document.addEventListener("keydown", (event) => {
        if (lightbox.hidden) return;

        if (event.key === "Escape") {
          closeLightbox();
          return;
        }

        if (event.key === "ArrowRight") {
          setSlide(currentIndex + 1);
          return;
        }

        if (event.key === "ArrowLeft") {
          setSlide(currentIndex - 1);
          return;
        }

        if (event.key === "Tab") {
          const focusableElements = getFocusableElements();
          if (focusableElements.length === 0) {
            event.preventDefault();
            return;
          }

          const firstElement = focusableElements[0];
          const lastElement = focusableElements[focusableElements.length - 1];
          const activeElement = document.activeElement;

          if (!lightbox.contains(activeElement)) {
            event.preventDefault();
            firstElement.focus();
            return;
          }

          if (event.shiftKey && activeElement === firstElement) {
            event.preventDefault();
            lastElement.focus();
            return;
          }

          if (!event.shiftKey && activeElement === lastElement) {
            event.preventDefault();
            firstElement.focus();
          }
        }
      });
    })();
  </script>
</body>
</html>
